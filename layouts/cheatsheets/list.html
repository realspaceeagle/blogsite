{{ define "main" }}
<link rel="stylesheet" href="/css/cheatsheet-style.css">
<link rel="stylesheet" href="/css/cheatsheet-sidebar.css">

{{ $nav := site.Data.cheatsheets.navigation }}
<div class="cheatsheet-shell">
  <aside class="cheatsheet-sidebar" aria-label="Cheatsheet navigation">
    <div class="sidebar-heading">
      <p class="sidebar-eyebrow">Cheatsheet Library</p>
      <h1 class="sidebar-title">{{ .Title }}</h1>
      {{ with .Params.description }}
      <p class="sidebar-description">{{ . }}</p>
      {{ end }}
      <div class="sidebar-search">
        <input type="search" class="sidebar-search-input" data-cheatsheet-search placeholder="Search cheatsheets..." aria-label="Search cheatsheets">
        <button type="button" class="sidebar-search-clear" data-cheatsheet-clear aria-label="Clear search">&times;</button>
      </div>
    </div>

    {{ with $nav.categories }}
    <div class="sidebar-groups">
      {{ range . }}
      {{ $categoryTitle := .title }}
      <section class="sidebar-group" data-category="{{ .id }}">
        <button class="sidebar-group-toggle" type="button" aria-expanded="true">
          <span class="toggle-label">{{ $categoryTitle }}</span>
          <span class="toggle-indicator" aria-hidden="true">v</span>
        </button>
        <ul class="sidebar-items">
          {{ range .items }}
          {{ $slug := .slug }}
          {{ $page := $.Site.GetPage (printf "/cheatsheets/%s" $slug) }}
          {{ $title := or .title (and $page $page.Title) (title $slug) }}
          {{ $summary := or .summary (and $page $page.Params.description) "" }}
          <li class="sidebar-item-wrapper">
            <button
              class="sidebar-item"
              type="button"
              data-cheatsheet-target="{{ $slug }}"
              data-cheatsheet-title="{{ $title }}"
              data-cheatsheet-category="{{ $categoryTitle }}"
              data-cheatsheet-url="{{ with $page }}{{ .RelPermalink }}{{ end }}">
              <span class="item-title">{{ $title }}</span>
              {{ with $summary }}
              <span class="item-summary">{{ . }}</span>
              {{ end }}
            </button>
          </li>
          {{ end }}
        </ul>
      </section>
      {{ end }}
    </div>
    <div class="sidebar-empty" data-cheatsheet-empty hidden>
      <p>No cheatsheets match your search.</p>
    </div>
    {{ end }}
  </aside>

  <section class="cheatsheet-body">
    <header class="cheatsheet-header">
      <nav class="cheatsheet-breadcrumb" aria-label="Breadcrumb">
        <a href="/">Home</a>
        <span aria-hidden="true">/</span>
        <a href="/cheatsheets/">Cheatsheets</a>
        <span aria-hidden="true">/</span>
        <span data-cheatsheet-breadcrumb>Loading...</span>
      </nav>
      <div class="cheatsheet-actions">
        <button type="button" class="cheatsheet-action" data-cheatsheet-copy>Copy link</button>
        <button type="button" class="cheatsheet-action" data-cheatsheet-print>Print</button>
      </div>
    </header>

    <div class="cheatsheet-content" data-cheatsheet-content>
      {{ range $category := $nav.categories }}
      {{ $categoryTitle := $category.title }}
      {{ range $item := $category.items }}
      {{ $slug := $item.slug }}
      {{ $page := $.Site.GetPage (printf "/cheatsheets/%s" $slug) }}
      {{ $title := or $item.title (and $page $page.Title) (title $slug) }}
      <article class="cheatsheet-entry" data-cheatsheet="{{ $slug }}" hidden>
        {{ if $page }}
        <div class="cheatsheet-entry-inner">
          {{ $page.Content }}
        </div>
        {{ else }}
        <div class="cheatsheet-entry-inner cheatsheet-entry-placeholder">
          <h1>{{ $title }} Cheatsheet</h1>
          {{ with $item.summary }}
          <p>{{ . }}</p>
          {{ else }}
          <p>This reference is being prepared. Check back soon for a detailed walkthrough and quick reference commands.</p>
          {{ end }}
          <ul class="placeholder-list">
            <li>Attack surface overview</li>
            <li>Detection and enumeration steps</li>
            <li>Exploitation playbook</li>
            <li>Remediation and defensive guidance</li>
          </ul>
        </div>
        {{ end }}
      </article>
      {{ end }}
      {{ end }}
    </div>
  </section>
</div>

<script src="/js/cheatsheet-sidebar.js" defer></script>
{{ end }}






